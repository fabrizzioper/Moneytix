(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{88:(e,a,t)=>{"use strict";t.d(a,{d:()=>n});var r=t(5155),s=t(2115),l=t(4884),i=t(3999);let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.bL,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:(0,r.jsx)(l.zi,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});n.displayName=l.bL.displayName},197:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>L});var r=t(5155),s=t(2115),l=t(5695),i=t(7168),n=t(9852),c=t(2714),o=t(5784),d=t(4059),m=t(9428),u=t(3999);let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(d.bL,{className:(0,u.cn)("grid gap-2",t),...s,ref:a})});x.displayName=d.bL.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(d.q7,{ref:a,className:(0,u.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,r.jsx)(d.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(m.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});p.displayName=d.q7.displayName;var h=t(8482),g=t(547);let f=g.bL,j=g.l9,y=s.forwardRef((e,a)=>{let{className:t,align:s="center",sideOffset:l=4,...i}=e;return(0,r.jsx)(g.ZL,{children:(0,r.jsx)(g.UC,{ref:a,align:s,sideOffset:l,className:(0,u.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})})});y.displayName=g.UC.displayName;var b=t(2355),N=t(3052),v=t(4666);function P(e){let{className:a,classNames:t,showOutsideDays:s=!0,...l}=e;return(0,r.jsx)(v.h,{showOutsideDays:s,className:(0,u.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,u.cn)((0,i.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,u.cn)((0,i.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...a}=e;return(0,r.jsx)(b.A,{className:"h-4 w-4"})},IconRight:e=>{let{...a}=e;return(0,r.jsx)(N.A,{className:"h-4 w-4"})}},...l})}P.displayName="Calendar";let w=(0,t(2085).F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function z(e){let{className:a,variant:t,...s}=e;return(0,r.jsx)("div",{className:(0,u.cn)(w({variant:t}),a),...s})}var F=t(88),R=t(4503),C=t(6471),A=t(7550),T=t(9074),G=t(5339),k=t(4616),q=t(4416),V=t(1284),E=t(3008),J=t(3439),M=t(573);function L(){let e=(0,l.useRouter)();(0,l.usePathname)();let a=(0,l.useSearchParams)(),{toast:t}=(0,R.dj)();a.get("duplicate");let[d,m]=(0,s.useState)({emissionDate:new Date,currency:"PEN",exchangeRate:3.7,paymentFrequency:"Semestral",customFrequency:6,totalTerm:5,initialQuotaPercentage:0,amortizationMethod:"Franc\xe9s",rateType:"TEA",capitalizationM:12,nominalValue:1e5,initialRate:8,posteriorRate:null,rateChangeYear:null,redemptionPremium:0,structuring:1,placement:.5,commercialValue:1e5,marketRate:10,floating:.5,cavali:.5,partialGraceAmortizationPercentage:0,totalGracePeriods:[],partialGracePeriods:[]}),[g,b]=(0,s.useState)({}),[N,v]=(0,s.useState)(0),[w,L]=(0,s.useState)(0),[S,D]=(0,s.useState)(0),[_,I]=(0,s.useState)(""),[Y,Q]=(0,s.useState)(""),[U,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{v(Math.floor(12/("Personalizado"===d.paymentFrequency?d.customFrequency:B(d.paymentFrequency))*d.totalTerm));let e=d.commercialValue*(1-d.initialQuotaPercentage/100);L(e),(0===d.nominalValue||d.nominalValue===d.commercialValue)&&m(a=>({...a,nominalValue:e}));let a=0,t=W(d.paymentFrequency,d.customFrequency);D("TEA"===d.rateType?Math.pow(1+d.initialRate/100,t/360)-1:Math.pow(1+d.initialRate/100/d.capitalizationM,t*d.capitalizationM/360)-1)},[d.paymentFrequency,d.customFrequency,d.totalTerm,d.commercialValue,d.initialQuotaPercentage,d.rateType,d.initialRate,d.capitalizationM,d.nominalValue]);let B=e=>{switch(e){case"Mensual":return 1;case"Trimestral":return 3;case"Cuatrimestral":return 4;case"Semestral":default:return 6;case"Anual":return 12;case"Personalizado":return d.customFrequency}},W=(e,a)=>30*("Personalizado"===e?a:B(e)),$=(e,a)=>{m(t=>({...t,[e]:a})),g[e]&&b(a=>({...a,[e]:void 0}))},O=e=>{m(a=>({...a,totalGracePeriods:a.totalGracePeriods.filter(a=>a!==e)}))},H=e=>{m(a=>({...a,partialGracePeriods:a.partialGracePeriods.filter(a=>a!==e)}))},K=()=>{let e={};return d.emissionDate||(e.emissionDate="La fecha de emisi\xf3n es requerida"),d.currency||(e.currency="La moneda es requerida"),"PEN"!==d.currency&&d.exchangeRate<=0&&(e.exchangeRate="El tipo de cambio debe ser mayor a 0"),d.paymentFrequency||(e.paymentFrequency="La frecuencia de pago es requerida"),"Personalizado"===d.paymentFrequency&&(d.customFrequency<1||d.customFrequency>12)&&(e.customFrequency="Los meses entre pagos deben estar entre 1 y 12"),(d.totalTerm<1||d.totalTerm>40)&&(e.totalTerm="El plazo total debe estar entre 1 y 40 a\xf1os"),(d.initialQuotaPercentage<0||d.initialQuotaPercentage>100)&&(e.initialQuotaPercentage="El porcentaje de cuota inicial debe estar entre 0 y 100"),d.rateType||(e.rateType="El tipo de tasa es requerido"),"TNA"!==d.rateType||[1,2,3,4,6,12].includes(d.capitalizationM)||(e.capitalizationM="La capitalizaci\xf3n debe ser 1, 2, 3, 4, 6 o 12"),d.nominalValue<=0&&(e.nominalValue="El valor nominal debe ser mayor a 0"),(d.initialRate<0||d.initialRate>100)&&(e.initialRate="La tasa inicial debe estar entre 0 y 100"),null!==d.posteriorRate&&(d.posteriorRate<0||d.posteriorRate>100)&&(e.posteriorRate="La tasa posterior debe estar entre 0 y 100"),null!==d.posteriorRate&&null!==d.rateChangeYear&&(d.rateChangeYear<=0||d.rateChangeYear>d.totalTerm)&&(e.rateChangeYear="El a\xf1o de cambio debe ser mayor a 0 y menor o igual al plazo total"),(d.redemptionPremium<0||d.redemptionPremium>10)&&(e.redemptionPremium="La prima a la redenci\xf3n debe estar entre 0 y 10"),(d.structuring<0||d.structuring>5)&&(e.structuring="La estructuraci\xf3n debe estar entre 0 y 5"),(d.placement<0||d.placement>2)&&(e.placement="La colocaci\xf3n debe estar entre 0 y 2"),d.commercialValue<=0&&(e.commercialValue="El valor comercial debe ser mayor a 0"),(d.marketRate<0||d.marketRate>100)&&(e.marketRate="La TEA de mercado debe estar entre 0 y 100"),(d.floating<0||d.floating>2)&&(e.floating="La flotaci\xf3n debe estar entre 0 y 2"),(d.cavali<0||d.cavali>2)&&(e.cavali="CAVALI debe estar entre 0 y 2"),(d.partialGraceAmortizationPercentage<0||d.partialGraceAmortizationPercentage>100)&&(e.partialGraceAmortizationPercentage="El porcentaje de amortizaci\xf3n debe estar entre 0 y 100"),b(e),0===Object.keys(e).length};return(0,r.jsxs)("div",{className:"flex h-screen bg-white",children:[(0,r.jsx)(M.B,{currentPath:"/bonds"}),(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:(0,r.jsxs)("div",{className:"flex-1 overflow-auto p-4 md:p-8 md:pt-8 pt-20",children:[(0,r.jsx)(C.l,{}),(0,r.jsxs)(i.$,{variant:"ghost",onClick:()=>e.back(),className:"mb-6",children:[(0,r.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Volver"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-slate-800 mb-6",children:"Crear nuevo bono"}),(0,r.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!K()){t({title:"Error de validaci\xf3n",description:"Por favor, corrige los errores en el formulario",variant:"destructive"});return}Z(!0),setTimeout(()=>{let a=Math.floor(1e3*Math.random()).toString();t({title:"Bono creado",description:"El bono ha sido creado y calculado correctamente"}),Z(!1),e.push("/bonds/".concat(a))},1500)},className:"space-y-8",children:[(0,r.jsxs)(h.Zp,{children:[(0,r.jsx)(h.aR,{className:"bg-slate-50 rounded-t-lg",children:(0,r.jsx)(h.ZB,{className:"text-lg",children:"Datos generales"})}),(0,r.jsx)(h.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"emissionDate",children:"Fecha de emisi\xf3n"}),(0,r.jsxs)(f,{children:[(0,r.jsx)(j,{asChild:!0,children:(0,r.jsxs)(i.$,{variant:"outline",className:(0,u.cn)("w-full justify-start text-left font-normal",!d.emissionDate&&"text-muted-foreground",g.emissionDate&&"border-red-500"),children:[(0,r.jsx)(T.A,{className:"mr-2 h-4 w-4"}),d.emissionDate?(0,E.GP)(d.emissionDate,"PPP",{locale:J.es}):(0,r.jsx)("span",{children:"Seleccionar fecha"})]})}),(0,r.jsx)(y,{className:"w-auto p-0",children:(0,r.jsx)(P,{mode:"single",selected:d.emissionDate,onSelect:e=>$("emissionDate",e),initialFocus:!0})})]}),g.emissionDate&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.emissionDate]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"currency",children:"Moneda"}),(0,r.jsxs)(o.l6,{value:d.currency,onValueChange:e=>$("currency",e),children:[(0,r.jsx)(o.bq,{className:(0,u.cn)(g.currency&&"border-red-500"),children:(0,r.jsx)(o.yv,{placeholder:"Seleccionar moneda"})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"PEN",children:"PEN - Soles"}),(0,r.jsx)(o.eb,{value:"USD",children:"USD - D\xf3lares"}),(0,r.jsx)(o.eb,{value:"EUR",children:"EUR - Euros"})]})]}),g.currency&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.currency]})]}),"PEN"!==d.currency&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"exchangeRate",children:"Tipo de cambio"}),(0,r.jsx)(n.p,{id:"exchangeRate",type:"number",step:"0.01",value:d.exchangeRate,onChange:e=>$("exchangeRate",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.exchangeRate&&"border-red-500")}),g.exchangeRate&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.exchangeRate]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"paymentFrequency",children:"Frecuencia de pago"}),(0,r.jsxs)(o.l6,{value:d.paymentFrequency,onValueChange:e=>$("paymentFrequency",e),children:[(0,r.jsx)(o.bq,{className:(0,u.cn)(g.paymentFrequency&&"border-red-500"),children:(0,r.jsx)(o.yv,{placeholder:"Seleccionar frecuencia"})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"Mensual",children:"Mensual"}),(0,r.jsx)(o.eb,{value:"Trimestral",children:"Trimestral"}),(0,r.jsx)(o.eb,{value:"Cuatrimestral",children:"Cuatrimestral (4 meses)"}),(0,r.jsx)(o.eb,{value:"Semestral",children:"Semestral"}),(0,r.jsx)(o.eb,{value:"Anual",children:"Anual"}),(0,r.jsx)(o.eb,{value:"Personalizado",children:"Personalizado"})]})]}),g.paymentFrequency&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.paymentFrequency]})]}),"Personalizado"===d.paymentFrequency&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"customFrequency",children:"Meses entre pagos (1-12)"}),(0,r.jsx)(n.p,{id:"customFrequency",type:"number",min:"1",max:"12",value:d.customFrequency,onChange:e=>$("customFrequency",Number.parseInt(e.target.value)),className:(0,u.cn)(g.customFrequency&&"border-red-500")}),g.customFrequency&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.customFrequency]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"totalTerm",children:"Plazo total (a\xf1os)"}),(0,r.jsx)(n.p,{id:"totalTerm",type:"number",min:"1",max:"40",value:d.totalTerm,onChange:e=>$("totalTerm",Number.parseInt(e.target.value)),className:(0,u.cn)(g.totalTerm&&"border-red-500")}),g.totalTerm&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.totalTerm]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"initialQuotaPercentage",children:"% Cuota inicial"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"initialQuotaPercentage",type:"number",min:"0",max:"100",value:d.initialQuotaPercentage,onChange:e=>$("initialQuotaPercentage",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.initialQuotaPercentage&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.initialQuotaPercentage&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.initialQuotaPercentage]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"amortizationMethod",children:"M\xe9todo de amortizaci\xf3n"}),(0,r.jsx)(n.p,{id:"amortizationMethod",value:"Franc\xe9s",disabled:!0,className:"bg-slate-50"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{children:"Tipo de tasa"}),(0,r.jsxs)(x,{value:d.rateType,onValueChange:e=>$("rateType",e),className:"flex space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{value:"TEA",id:"tea"}),(0,r.jsx)(c.J,{htmlFor:"tea",className:"cursor-pointer",children:"TEA"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{value:"TNA",id:"tna"}),(0,r.jsx)(c.J,{htmlFor:"tna",className:"cursor-pointer",children:"TNA"})]})]}),g.rateType&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.rateType]})]}),"TNA"===d.rateType&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"capitalizationM",children:"Capitalizaci\xf3n m"}),(0,r.jsxs)(o.l6,{value:d.capitalizationM.toString(),onValueChange:e=>$("capitalizationM",Number.parseInt(e)),children:[(0,r.jsx)(o.bq,{className:(0,u.cn)(g.capitalizationM&&"border-red-500"),children:(0,r.jsx)(o.yv,{placeholder:"Seleccionar capitalizaci\xf3n"})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"1",children:"1"}),(0,r.jsx)(o.eb,{value:"2",children:"2"}),(0,r.jsx)(o.eb,{value:"3",children:"3"}),(0,r.jsx)(o.eb,{value:"4",children:"4"}),(0,r.jsx)(o.eb,{value:"6",children:"6"}),(0,r.jsx)(o.eb,{value:"12",children:"12"})]})]}),g.capitalizationM&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.capitalizationM]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"derivedN",children:"Dato derivado n"}),(0,r.jsx)(n.p,{id:"derivedN",value:N,disabled:!0,className:"bg-slate-50"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"n = (12/meses) \xd7 plazo"})]})]})})]}),(0,r.jsxs)(h.Zp,{children:[(0,r.jsx)(h.aR,{className:"bg-slate-50 rounded-t-lg",children:(0,r.jsx)(h.ZB,{className:"text-lg",children:"Datos del emisor"})}),(0,r.jsx)(h.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"nominalValue",children:"Valor nominal (C)"}),(0,r.jsx)(n.p,{id:"nominalValue",type:"number",min:"0",step:"0.01",value:d.nominalValue,onChange:e=>$("nominalValue",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.nominalValue&&"border-red-500")}),(0,r.jsxs)("p",{className:"text-xs text-slate-500",children:["Calculado: ",w.toLocaleString("es-PE",{maximumFractionDigits:2})]}),g.nominalValue&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.nominalValue]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(c.J,{htmlFor:"initialRate",children:[d.rateType," inicial (%)"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"initialRate",type:"number",min:"0",max:"100",step:"0.01",value:d.initialRate,onChange:e=>$("initialRate",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.initialRate&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.initialRate&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.initialRate]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(c.J,{htmlFor:"posteriorRate",children:[d.rateType," posterior (%)"]}),(0,r.jsx)(F.d,{checked:null!==d.posteriorRate,onCheckedChange:e=>$("posteriorRate",e?d.initialRate:null)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"posteriorRate",type:"number",min:"0",max:"100",step:"0.01",value:null!==d.posteriorRate?d.posteriorRate:"",onChange:e=>$("posteriorRate",Number.parseFloat(e.target.value)),disabled:null===d.posteriorRate,className:(0,u.cn)(g.posteriorRate&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.posteriorRate&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.posteriorRate]})]}),null!==d.posteriorRate&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"rateChangeYear",children:"A\xf1o de cambio de tasa"}),(0,r.jsx)(n.p,{id:"rateChangeYear",type:"number",min:"1",max:d.totalTerm,value:null!==d.rateChangeYear?d.rateChangeYear:"",onChange:e=>$("rateChangeYear",Number.parseInt(e.target.value)),className:(0,u.cn)(g.rateChangeYear&&"border-red-500")}),g.rateChangeYear&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.rateChangeYear]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"redemptionPremium",children:"Prima a la redenci\xf3n (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"redemptionPremium",type:"number",min:"0",max:"10",step:"0.01",value:d.redemptionPremium,onChange:e=>$("redemptionPremium",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.redemptionPremium&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.redemptionPremium&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.redemptionPremium]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"structuring",children:"Estructuraci\xf3n (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"structuring",type:"number",min:"0",max:"5",step:"0.01",value:d.structuring,onChange:e=>$("structuring",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.structuring&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.structuring&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.structuring]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"placement",children:"Colocaci\xf3n (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"placement",type:"number",min:"0",max:"2",step:"0.01",value:d.placement,onChange:e=>$("placement",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.placement&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.placement&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.placement]})]})]})})]}),(0,r.jsxs)(h.Zp,{children:[(0,r.jsx)(h.aR,{className:"bg-slate-50 rounded-t-lg",children:(0,r.jsx)(h.ZB,{className:"text-lg",children:"Datos del inversionista"})}),(0,r.jsx)(h.Wu,{className:"pt-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"commercialValue",children:"Valor comercial"}),(0,r.jsx)(n.p,{id:"commercialValue",type:"number",min:"0",step:"0.01",value:d.commercialValue,onChange:e=>$("commercialValue",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.commercialValue&&"border-red-500")}),g.commercialValue&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.commercialValue]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"marketRate",children:"TEA mercado (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"marketRate",type:"number",min:"0",max:"100",step:"0.01",value:d.marketRate,onChange:e=>$("marketRate",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.marketRate&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.marketRate&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.marketRate]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"floating",children:"Flotaci\xf3n (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"floating",type:"number",min:"0",max:"2",step:"0.01",value:d.floating,onChange:e=>$("floating",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.floating&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.floating&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.floating]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"cavali",children:"CAVALI (%)"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"cavali",type:"number",min:"0",max:"2",step:"0.01",value:d.cavali,onChange:e=>$("cavali",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.cavali&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.cavali&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.cavali]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"partialGraceAmortizationPercentage",children:"% Amortizaci\xf3n en gracia parcial"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"partialGraceAmortizationPercentage",type:"number",min:"0",max:"100",step:"0.01",value:d.partialGraceAmortizationPercentage,onChange:e=>$("partialGraceAmortizationPercentage",Number.parseFloat(e.target.value)),className:(0,u.cn)(g.partialGraceAmortizationPercentage&&"border-red-500")}),(0,r.jsx)("span",{className:"text-sm text-slate-500",children:"%"})]}),g.partialGraceAmortizationPercentage&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.partialGraceAmortizationPercentage]})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-1 md:col-span-2 lg:col-span-3",children:[(0,r.jsx)(c.J,{htmlFor:"totalGracePeriods",children:"Periodos de gracia Total"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"totalGracePeriods",type:"number",min:"1",max:N,placeholder:"Ingrese un n\xfamero entre 1 y ".concat(N),value:_,onChange:e=>I(e.target.value),className:(0,u.cn)(g.totalGracePeriods&&"border-red-500")}),(0,r.jsxs)(i.$,{type:"button",onClick:()=>{let e=Number.parseInt(_);if(isNaN(e)||e<=0||e>N){b(e=>({...e,totalGracePeriods:"El per\xedodo debe ser un n\xfamero entre 1 y ".concat(N)}));return}if(d.totalGracePeriods.includes(e)){b(e=>({...e,totalGracePeriods:"Este per\xedodo ya est\xe1 en la lista"}));return}m(a=>({...a,totalGracePeriods:[...a.totalGracePeriods,e].sort((e,a)=>e-a)})),I(""),b(e=>({...e,totalGracePeriods:void 0}))},variant:"outline",children:[(0,r.jsx)(k.A,{size:16}),"Agregar"]})]}),g.totalGracePeriods&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.totalGracePeriods]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:d.totalGracePeriods.map(e=>(0,r.jsxs)(z,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>O(e),className:"text-slate-500 hover:text-red-500",children:(0,r.jsx)(q.A,{size:14})})]},"total-".concat(e)))})]}),(0,r.jsxs)("div",{className:"space-y-2 col-span-1 md:col-span-2 lg:col-span-3",children:[(0,r.jsx)(c.J,{htmlFor:"partialGracePeriods",children:"Periodos de gracia Parcial"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.p,{id:"partialGracePeriods",type:"number",min:"1",max:N,placeholder:"Ingrese un n\xfamero entre 1 y ".concat(N),value:Y,onChange:e=>Q(e.target.value),className:(0,u.cn)(g.partialGracePeriods&&"border-red-500")}),(0,r.jsxs)(i.$,{type:"button",onClick:()=>{let e=Number.parseInt(Y);if(isNaN(e)||e<=0||e>N){b(e=>({...e,partialGracePeriods:"El per\xedodo debe ser un n\xfamero entre 1 y ".concat(N)}));return}if(d.partialGracePeriods.includes(e)){b(e=>({...e,partialGracePeriods:"Este per\xedodo ya est\xe1 en la lista"}));return}m(a=>({...a,partialGracePeriods:[...a.partialGracePeriods,e].sort((e,a)=>e-a)})),Q(""),b(e=>({...e,partialGracePeriods:void 0}))},variant:"outline",children:[(0,r.jsx)(k.A,{size:16}),"Agregar"]})]}),g.partialGracePeriods&&(0,r.jsxs)("p",{className:"text-sm text-red-500 flex items-center gap-1",children:[(0,r.jsx)(G.A,{size:14}),g.partialGracePeriods]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:d.partialGracePeriods.map(e=>(0,r.jsxs)(z,{variant:"secondary",className:"flex items-center gap-1",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>H(e),className:"text-slate-500 hover:text-red-500",children:(0,r.jsx)(q.A,{size:14})})]},"partial-".concat(e)))})]}),(0,r.jsx)("div",{className:"col-span-1 md:col-span-2 lg:col-span-3 bg-slate-50 p-4 rounded-md",children:(0,r.jsxs)("p",{className:"text-sm text-slate-600 flex items-start gap-2",children:[(0,r.jsx)(V.A,{size:16,className:"mt-0.5 flex-shrink-0"}),"Si un periodo figura en ambas listas, prevalece Gracia Total; la amortizaci\xf3n parcial aplicar\xe1 el % definido arriba."]})})]})})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>e.back(),disabled:U,children:"Cancelar"}),(0,r.jsx)(i.$,{type:"submit",disabled:U,className:"bg-green-500 hover:bg-green-600",children:U?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Procesando..."]}):"Guardar y calcular"})]})]})]})})]})}},810:(e,a,t)=>{Promise.resolve().then(t.bind(t,197))},2714:(e,a,t)=>{"use strict";t.d(a,{J:()=>o});var r=t(5155),s=t(2115),l=t(968),i=t(2085),n=t(3999);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.b,{ref:a,className:(0,n.cn)(c(),t),...s})});o.displayName=l.b.displayName},5784:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>g,gC:()=>h,l6:()=>d,yv:()=>m});var r=t(5155),s=t(2115),l=t(4582),i=t(6474),n=t(7863),c=t(5196),o=t(3999);let d=l.bL;l.YJ;let m=l.WT,u=s.forwardRef((e,a)=>{let{className:t,children:s,...n}=e;return(0,r.jsxs)(l.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[s,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let h=s.forwardRef((e,a)=>{let{className:t,children:s,position:i="popper",...n}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(p,{})]})})});h.displayName=l.UC.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s})}).displayName=l.JU.displayName;let g=s.forwardRef((e,a)=>{let{className:t,children:s,...i}=e;return(0,r.jsxs)(l.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:s})]})});g.displayName=l.q7.displayName,s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...s})}).displayName=l.wv.displayName},8482:(e,a,t)=>{"use strict";t.d(a,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>i,aR:()=>n,wL:()=>m});var r=t(5155),s=t(2115),l=t(3999);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s})});i.displayName="Card";let n=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...s})});n.displayName="CardHeader";let c=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",t),...s})});d.displayName="CardContent";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",t),...s})});m.displayName="CardFooter"},9852:(e,a,t)=>{"use strict";t.d(a,{p:()=>i});var r=t(5155),s=t(2115),l=t(3999);let i=s.forwardRef((e,a)=>{let{className:t,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});i.displayName="Input"}},e=>{var a=a=>e(e.s=a);e.O(0,[817,604,451,899,275,813,441,684,358],()=>a(810)),_N_E=e.O()}]);